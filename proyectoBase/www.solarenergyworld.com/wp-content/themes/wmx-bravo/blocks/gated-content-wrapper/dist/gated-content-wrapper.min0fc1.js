document.addEventListener("DOMContentLoaded",(function(t){document.querySelectorAll(".block--gated-content-wrapper").forEach((function(t){var e={block:null,id:null,filter:null,init:function(t){this.block=t,this.id=this.block.id,this.block.classList.add("locked"),this.filter=this.block.querySelector(".filter"),this.data(),this.submit(),this.reset()},data:function(){var t=[];this.block.querySelectorAll(".block--gated-content").forEach((function(e,o){var i=e.dataset.options;""!==i&&(i=JSON.parse(i)).forEach((function(e,o){t.push(e)}))})),t.sort((function(t,e){return t.option.localeCompare(e.option)})),this.options(t)},options:function(t){var e=this,o=this.block.querySelector("#state_filter");t.forEach((function(t,e){var i=document.createElement("li");i.classList.add("dropdown-item"),i.setAttribute("data-filter-type","state"),i.setAttribute("data-filter-value",JSON.stringify(t)),i.setAttribute("tabindex",0),i.innerHTML=t.option,o.appendChild(i)})),this.block.querySelectorAll(".filter .dropdown").forEach((function(t){e.dropdowns(t)}))},dropdowns:function(t){var e=t.querySelector(".dropdown-toggle");t.querySelectorAll(".dropdown-item").forEach((function(t){t.addEventListener("click",(function(t){var o=t.target.getAttribute("data-filter-value"),i=t.target.innerText;e.setAttribute("data-filter-value",o),e.innerHTML=i})),t.addEventListener("keydown",(function(t){if("Enter"===t.key){var o=t.target.getAttribute("data-filter-value"),i=t.target.innerText;e.setAttribute("data-filter-value",o),e.innerHTML=i,e.focus(),e.setAttribute("aria-expanded","false")}}))}))},submit:function(){var t=this,e=this.block.querySelector(".filter-submit");null==e||e.addEventListener("click",(function(e){e.preventDefault(),t.unlock()}))},reset:function(){var t=this,e=this.block.querySelector(".filter-reset");null==e||e.addEventListener("click",(function(e){e.preventDefault(),t.lock()}))},lock:function(){this.block.classList.add("locked"),this.block.scrollIntoView({behavior:"smooth"})},unlock:function(){var t=this.block.querySelector(".filter .dropdown-toggle").getAttribute("data-filter-value"),e=this.block.querySelector(".filtered-link"),o=e.querySelector(".state");""!=t&&(t=JSON.parse(t),this.block.classList.remove("locked"),o.innerHTML=t.option,e.href=t.link,this.block.querySelectorAll(".block--gated-content").forEach((function(e){var o=e.dataset.options;(o=JSON.parse(o)).some((function(e){return e.option===t.option}))?e.style.display="block":e.style.display="none"}))),this.block.scrollIntoView({behavior:"smooth"})},log:function(t){console.log(t)}};e.init(t)}))}));